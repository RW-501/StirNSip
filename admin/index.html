<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Admin | Stir & Sip</title>
  <link rel="stylesheet" href="style.css"/>
</head>
<body>
  <!-- NAVIGATION -->
  <nav class="navbar">
    <div class="nav-brand"><a href="index.html" class="home"> Stir & Sip Admin</a></div>
    <ul class="nav-links">
      <li><a href="admin.html" class="active">Dashboard</a></li>
      <li><a href="#admin-classes-list">View Classes</a></li>
      <li><a href="settings">Settings</a></li>
      <li><a href="logout.html">Logout</a></li>
    </ul>
  </nav>

  <main>

<!-- Login screen (hidden by default) -->
<section id="login-screen" style="display:none; max-width:400px; margin:2rem auto;">
  <h2>Admin Login</h2>

  <button id="googleLoginBtn">Login with Google</button>
  <button id="phoneLoginBtn">Login with Phone</button>

  <div id="phoneLoginForm" style="display:none; margin-top:1rem;">
    <input type="tel" id="phoneNumber" placeholder="+1 555-555-5555" />
    <button id="sendCodeBtn">Send Code</button>
    <input type="text" id="verificationCode" placeholder="Enter code" style="display:none; margin-top:0.5rem;" />
    <button id="verifyCodeBtn" style="display:none; margin-top:0.5rem;">Verify Code</button>
  </div>

  <p id="loginError" style="color:red;"></p>
</section>


    <div id="site-settings" style="display:none;">

    <h1>Admin Dashboard</h1>

    <nav id="adminNav" style="margin-bottom:1rem;">
  <button data-target="#class-form">Classes</button>
  <button data-target="#gallery-section">Gallery</button>
  <button data-target="#admin-merch-section">Merch</button>
  <button data-target="#budget-section">Budget</button>
  <button id="showAllSections">Show All</button>
</nav>


<!-- ADD / EDIT CLASS FORM -->
<form id="class-form">
  <input type="hidden" id="classId" />
  <input type="text" id="className" placeholder="Class Name" required />

  <!-- Multiple Dates/Times -->
  <div id="dateTimeContainer">
    <div class="date-time-group">
      <input type="date" class="classDate" required />
      <input type="time" class="classTime" required />
    </div>
  </div>
  <button type="button" id="addDateTime">+ Add Another Date/Time</button>

  <textarea id="classDescription" placeholder="Description" required></textarea>
  <textarea id="classRecipe" placeholder="Recipe / Extra Info (optional)"></textarea>

  <!-- What we're cooking -->
  <input type="text" id="whatCooking" placeholder="What are we cooking?" required />

  <label>
    <input type="checkbox" id="classVisible" checked />
    Visible
  </label>

  <!-- Costs -->
  <label for="singlesCost">Singles Cost ($):</label>
  <input type="number" id="singlesCost" min="0" step="0.01" />

  <label for="couplesCost">Couples Cost ($):</label>
  <input type="number" id="couplesCost" min="0" step="0.01" />

  <!-- Size -->
  <label for="classSize">Class Size:</label>
  <input type="number" id="classSize" min="1" />

  <label for="spotsAvailable">Spots Available:</label>
  <input type="number" id="spotsAvailable" min="0" />

  <!-- Vibe -->
  <label for="classVibe">Vibe:</label>
  <select id="classVibe">
    <option value="">-- Select Vibe --</option>
    <option value="Classic Comfort Night">Classic Comfort Night</option>
    <option value="hip hop">Hip Hop</option>
    <option value="hype">Hype</option>
    <option value="old skool">Old Skool</option>
  </select>

  <!-- Cover -->
<label for="classCover">Class Cover Image:</label>
<div id="classCover" class="cover-options"></div>

<img id="coverPreview" src="" alt="Cover Preview" style="max-width:200px; display:block; margin-top:0.5rem;" />

    <!-- Eventbrite Link -->
  <label for="eventbriteLink">Eventbrite Link:</label>
  <input type="url" id="eventbriteLink" placeholder="Eventbrite Link"  />

      <!-- second Link -->
  <label for="secondLink">Second Link:</label>
  <input type="url" id="secondLink" placeholder="Second Link"  />

  
  <button type="submit">Save Class</button>
  <button type="button" id="cancelEdit" style="display:none;">Cancel Edit</button>
</form>
<hr/>

<div class="form-actions">
  <button type="submit" class="cta-btn">Save Class</button>
  <button type="button" id="saveTemplate" class="secondary-btn">Save as Template</button>
  <select id="templateSelect">
    <option value="">-- Load Template --</option>
  </select>


  <button type="button" id="loadTemplate" class="secondary-btn">Load</button>
  
  <!-- Add this next to your Save/Load buttons -->
  <button id="updateTemplate">Update Template</button>

  <button id="deleteTemplate">Delete Template</button>

</div>


    <hr/>

    <!-- CLASSES LIST -->
    <div id="admin-classes-list"></div>

    <hr/>
<!-- GALLERY UPLOAD SECTION -->
<section id="gallery-section">
  <h2>Event / Class Gallery</h2>

  <div id="drop-zone" style="border:2px dashed #aaa; padding:1rem; text-align:center; margin-bottom:1rem;">
    Drag & Drop Images Here
  </div>

  <form id="gallery-form">
    <input type="file" id="galleryImage" accept="image/*" multiple hidden />
    <input type="text" id="galleryGroup" placeholder="Group / Category" />
    <label>
      <input type="checkbox" id="galleryCover" />
      Set as Cover Image
    </label>
    <button type="submit">Upload Image</button>
  </form>

  <!-- unified ID (only one!) -->
  <div id="gallery-list" style="display:flex; flex-wrap:wrap; gap:10px;"></div>
</section>



<section id="admin-merch-section">
  <h2>Manage Merchandise</h2>
  
  <form id="merch-form">
    <input type="hidden" id="merchId">
    
    <label for="merchName">Name:</label>
    <input type="text" id="merchName" required>
    
    <label for="merchDescription">Description:</label>
    <textarea id="merchDescription" rows="3"></textarea>
    
    <label for="merchCost">Cost ($):</label>
    <input type="number" id="merchCost" step="0.01" min="0">
    
    <label for="merchAvailable">Available:</label>
    <input type="number" id="merchAvailable" min="0">
    
    <label for="merchLink">Buy Link:</label>
    <input type="url" id="merchLink" placeholder="https:// or leave empty for coming soon">
    
    <label for="merchVisible">Visible:</label>
    <input type="checkbox" id="merchVisible" checked>
    
    <label>Image:</label>
    <div id="merchCoverOptions"></div>
    <img id="merchCoverPreview" style="max-width:150px; margin-top:5px;">
    
    <button type="submit">Save Merch</button>
    <button type="button" id="cancelMerchEdit">Cancel</button>
  </form>

  <div id="admin-merch-list"></div>
</section>



<section id="budget-section">
  <h2>Budget & Class Planner</h2>

  <div class="budget-controls">
    <input type="text" id="budgetSearch" placeholder="Search items...">
    <select id="budgetFilterClass">
      <option value="">All Classes</option>
    </select>
    <button id="addBudgetItemBtn">Add Item</button>
  </div>

  <table id="budgetTable">
    <thead>
      <tr>
        <th>Class</th>
        <th>Live</th>
        <th>Item / Task</th>
        <th>Est. Cost</th>
        <th>Actual Cost</th>
        <th>Ticket Cost</th>
        <th>Venue Cost</th>
        <th>Profit</th>
        <th>Links</th>
        <th>Pictures</th>
        <th>Priority</th>
        <th>Notes</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody></tbody>
    <tfoot>
      <tr>
        <td colspan="3"><strong>Totals</strong></td>
        <td id="totalEstCost">0</td>
        <td id="totalActualCost">0</td>
        <td id="totalTicketCost">0</td>
        <td id="totalVenueCost">0</td>
        <td id="totalProfit">0</td>
        <td colspan="5"></td>
      </tr>
    </tfoot>
  </table>
</section>

<!-- Notes/Task Popup -->
<div id="budgetNotesPopup" class="popup hidden">
  <textarea id="budgetNotesText" rows="4"></textarea>
  <button id="saveBudgetNotesBtn">Save</button>
  <button id="closeBudgetNotesBtn">Close</button>
</div>

</div>


  </main>

  <!-- FOOTER -->
  <footer class="footer">
    <p>&copy; <span id="year"></span> Stir & Sip. Admin Panel.</p>
  </footer>


  <!-- Firebase -->
  <script src="admin.js" type="module"></script>
 <!-- <script src="sortable.js" type="module"></script>
-->
  <script>
    // Auto-update year
    document.getElementById("year").textContent = new Date().getFullYear();
  </script>
</body>
</html>
